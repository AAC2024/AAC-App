<!DOCTYPE html>
<html>
<head>
  <style>
    .draggableImage {
      width: 200px; 
      height: auto;
      position: absolute;
      cursor: move;
      resize: both;
      overflow: auto;

      /* Setting min and max width for resizing */
      min-width: 150px;
      max-width: 500px;
      transform-origin: center;
    }

    body {
      touch-action: none; /* Prevent default zoom and scroll behaviors */
    }
  </style>
</head>
<body>

<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/Hardwood iroko straight bar infill arch top swing gates.png" alt="Gate Design 1">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/Partial infill hardwood with metal railings at the top cantilever gate.png" alt="Gate Design 2">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/Partila infill cantilever gate wood panels and railings straight bar at top.png" alt="Gate Design 3">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/Straight top compinfill cantilever gate.png" alt="Gate Design 4">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/arch top cantilever solid wood infill.png" alt="Gate Design 5">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/arched top iroko hardwood cantilever gate partial wood and straight bar infill.png" alt="Gate Design 6">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/bow top comp wood infill sliding gate.png" alt="Gate Design 7">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/bow top iroko swing gates partial infill.png" alt="Gate Design 8">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/bow top sliding gate metal infill.png" alt="Gate Design 9">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/bow top sliding gate with spike metal infill.png" alt="Gate Design 10">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/bow top sliding gate with spikes metal infill.png" alt="Gate Design 11">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/cantilever bow top with straight round bar infill.png" alt="Gate Design 12">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/cantilever straigh top design vertical and horizontal box section infill.png" alt="Gate Design 13">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/double leaf metal infill straight bar arch top swing gates.png" alt="Gate Design 14">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/straight top comp infill set of swing gates.png" alt="Gate Design 15">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/straight top horizontal box section infill swing gates.png" alt="Gate Design 16">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/straight top partial infill metal frame wood infill swing gates.png" alt="Gate Design 17">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/wrought iron metal infill cantilever gate.png" alt="Gate Design 18">
<img class="draggableImage" src="https://raw.githubusercontent.com/AAC2024/AAC-App/main/Bow top comp infill cantilever gate.png" alt="Gate Design 19">


<script>
  var imgs = document.getElementsByClassName("draggableImage");

  for (let img of imgs) {
    // Variables for dragging
    var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;

    img.onmousedown = dragMouseDown;

    function dragMouseDown(e) {
      e = e || window.event;
      e.preventDefault();
      pos3 = e.clientX;
      pos4 = e.clientY;
      document.onmouseup = closeDragElement;
      document.onmousemove = elementDrag;
    }

    function elementDrag(e) {
      e = e || window.event;
      e.preventDefault();
      pos1 = pos3 - e.clientX;
      pos2 = e.clientY;
      pos3 = e.clientX;
      pos4 = e.clientY;
      img.style.top = (img.offsetTop - pos2) + "px";
      img.style.left = (img.offsetLeft - pos1) + "px";
    }

    function closeDragElement() {
      document.onmouseup = null;
      document.onmousemove = null;
    }

    // Pinch-to-zoom implementation
    var initialDistance = null;
    var initialWidth = img.clientWidth;

    window.addEventListener('touchmove', function(e) {
      if (e.touches.length == 2) {
        var touch1 = e.touches[0];
        var touch2 = e.touches[1];

        // Calculate the distance between the two touches
        var currentDistance = Math.sqrt(Math.pow(touch1.clientX - touch2.clientX, 2) + Math.pow(touch1.clientY - touch2.clientY, 2));

        // First time touchmove is called with two fingers, store the initial distance
        if (!initialDistance) {
          initialDistance = currentDistance;
        }

        // Calculate the scaling factor
        var scaleFactor = currentDistance / initialDistance;

        // Update the image width, ensuring it stays within min/max constraints
        var newWidth = initialWidth * scaleFactor;
        if (newWidth >= 150 && newWidth <= 500) {
          img.style.width = newWidth + 'px';
        }
      }
    });

    window.addEventListener('touchend', function(e) {
      if (e.touches.length < 2) {
        initialDistance = null;
        initialWidth = img.clientWidth;
      }
    });

    // Double-tap to resize to default size
    var lastTap = 0;
    img.addEventListener('touchend', function(e) {
      var currentTime = new Date().getTime();
      var tapLength = currentTime - lastTap;
      if (tapLength < 300 && tapLength > 0) {
        // Reset image size on double-tap
        img.style.width = '200px';
      }
      lastTap = currentTime;
    });

    // Rotate gesture
    var initialAngle = null;
    window.addEventListener('touchmove', function(e) {
      if (e.touches.length == 2) {
        var touch1 = e.touches[0];
        var touch2 = e.touches[1];

        // Calculate the current angle between the two fingers
        var angle = Math.atan2(touch2.clientY - touch1.clientY, touch2.clientX - touch1.clientX) * 180 / Math.PI;

        if (!initialAngle) {
          initialAngle = angle;
        }

        // Calculate the rotation difference and apply the transform
        var rotation = angle - initialAngle;
        img.style.transform = `rotate(${rotation}deg)`;
      }
    });

    window.addEventListener('touchend', function(e) {
      if (e.touches.length < 2) {
        initialAngle = null;
      }
    });
  }
</script>

</body>
</html>
